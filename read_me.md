## read me

##### 1.模型简介

本模型通过simulink的Interpreted MATLAB Function自定义函数[Dot_Model](Dot_Model.m)，该函数输入姿态参数$X=[V;\dot \alpha;\dot \beta;\dot p;\dot q;\dot r;\dot \phi;\dot \theta;\dot \psi;\dot x;\dot y;\dot z]$和控制参数$U=[\delta_e;\delta_a;\delta_r]$，输出姿态参数的时间导数$\dot X=[\dot V;\alpha;\beta;p;q;r;\phi;\theta;\psi;x;y;z]$，$\dot X$再经过integrator积分器积分得到新的$X$，新的$X$又作为输入继续执行[Dot_Model](Dot_Model.m)函数，循环迭代，从而搭建成六自由度飞行器动力学模型[Aircraft6DSimulation](Aircraft6DSimulation.slx)，通过[run_model](run_model.m)给定基准状态参数、控制指令和仿真步长实现六自由度飞行器动力学仿真。



##### 2.如何使用

使用时解压压缩包用最新版matlab**打开[run_model](run_model.m)**文件，设置**输入指令**和**仿真时间$dt$**，运行返回控制参数时间曲线和状态参数时间曲线。



##### 3.注意事项

- 该模型[Dot_Model](Dot_Model.m)函数中地面坐标系$z$轴向下，初始高度$3000 m$在该坐标系下的值为-3000，[run_model](run_model.m)中输出时的$z_g$经过转化方向向上，为实际高度；
- 在[Aircraft6DSimulation](Aircraft6DSimulation.slx)中地面坐标系$z$轴也向下，所以模型中输入指令升降舵偏转角是实际输入指令值的负值，经过处理，输出结果表现为实际值；
- 该模型假设飞机飞行过程中飞机视作刚体，质量不变，且发动机推力位于飞行器对称平面内；
- 该模型假设中$g=9.81 m/s^2,\rho=0.9096 kg/m^3$不变；
- 该模型仅适用于给定飞机DHC-6，其他飞机仅需在[Dot_Model](Dot_Model.m)里更改飞机参数；
- 实际模型中控制指令有一定输入范围，该模型未对输入控制指令加以限制，仅支持合理输入；
- 压缩包里的文件夹slprj等为模型运行自动生成数据，对程序无影响；
- 若遇到其他问题，欢迎与作者交流讨论（ykqcarroll@gmail.com)。





###### 附：测试输入指令：

(1) 基准状态

```matlab
TF = t1; %仿真时间10s
t2 = 0;  %指令结束时间
e = 0;   %升降舵输入指令值
a = 0;   %副翼输入指令值
r = 0;   %方向舵输入指令值
```

(2) 升降舵相对基准状态上偏5度，并保持2秒，然后回到基准舵偏角，仿真时长 60s

```matlab
TF = t1+60;     %仿真时间
t2 = t1+2;      %指令结束时间
e = 5*pi/180;   %升降舵输入指令值
a = 0;          %副翼输入指令值
r = 0;          %方向舵输入指令值
```

(3) 副翼相对基准状态偏转正2度，仿真时长30s

```matlab
TF = t1+30;     %仿真时间
t2 = TF;        %指令结束时间
e = 0;          %升降舵输入指令值
a = 2*pi/180;   %副翼输入指令值
r = 0;          %方向舵输入指令值
```

(4) 方向舵相对基准状态偏转负2度，仿真时长30s

```matlab
TF = t1+30;     %仿真时间
t2 = TF;        %指令结束时间
e = 0;          %升降舵输入指令值
a = 0;          %副翼输入指令值
r = -2*pi/180;  %方向舵输入指令值
```

 (5) 升降舵、副翼及方向舵相对基准状态同时偏转正2度，并保持2秒，然后都回到基准偏角，仿真时长60s；

```matlab
TF = t1+60;       %仿真时间
t2 = t1+2;        %指令结束时间
e = 2*pi/180;     %升降舵输入指令值
a = 2*pi/180;     %副翼输入指令值
r = 2*pi/180;     %方向舵输入指令值
```



